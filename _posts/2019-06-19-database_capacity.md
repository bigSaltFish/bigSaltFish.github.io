---
layout: default
title: 数据库分表后 如何优雅的扩容
#excerpt: 

---

# 停服方案

　　很low的方式，【停服方案】，先发公告，再停机，再迁移数据，测试没问题再发布。  

# 双倍扩容法

　　按id取膜，假设，开始是 %2， %2=0 -->库0  %2=1 -->库1  

　　1.双倍扩容，扩容后是四个， %4 库0和库1 依旧，多出来库00和库11，库0和库00互为主从，库1和库11也互为主从。  

　　2.待数据同步完毕，修改路由规则， %2 --> %4  

　　3.删除冗余数据

