---
layout: default
title: tronscan的一个bug
#excerpt: 

---

　　为了与时俱进，我们公司接入了波场区块链，一些业务数据放到链上。昨天，业务反馈9月21号，有部分上链的数据存在中文乱码问题。

　　接到反馈了，我和一个小伙伴立即去排查。首先找业务要了数据有问题的账号，登录进去，跳到波场浏览器，浏览器里确实是存在乱码的情况。 tronscan.org/#/transaction/tx_id 页面，方法调用块，中文值出现了 实心的问号。我看了network，返回值和页面展示是一致的。

　　这下就有点慌了，波场没问题，那有问题的，就是我们自己的代码了

　　然后去翻了下21号的升级记录，当天只有我的功能有升级，但是，升级的功能，和这数据上链没有一点关系。

　　我的小伙伴，又去问运维，那天有没有做什么服务节点迁移啊、改ip啊这些事情。运维很肯定的回答：没有

　　这就难办了，代码代码没升级，服务服务也没变更，就是很奇怪的出现了问题。。。

　　又跑去多看了几个账号的数据，总算有一点点的进步了，出问题的数据，都是21号9点到15点，并不是个例，是普遍的

　　找运维看日志，又看不了，kibana只保留了三周的日志

　　就这样，搞一整天也没整清楚。



　　第二天，既然自己搞不定，那就只能找外援了-咨询我们的架构师。架构师的境界就是不一样，他马上就想到用波场api去查询我们的数据，结果，这么一验证，还真的证明我们程序是ok的，问题出现在波场浏览器！用上面的tx_id填到 https://api.trongrid.io/v1/transactions/tx_id/events 中，神奇的是里面的信息是正常的，中文是正常显示

　　妥妥的波场的锅了。。。

